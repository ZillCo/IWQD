<!DOCTYPE html>
<html lang="en">
<head>
  <!-- ... (Head content remains the same) ... -->
</head>
<body>
  <div id="login-container">  <!-- Added container -->
    <div class="login-box" id="loginBox">
      <div>
        <h3 text-align="center">Sign In With Google</h3>
        <div id="g_id_onload"
           data-client_id="1082316602730-lasg1o8e0ub19u2dduv98i1il8qkl5u5.apps.googleusercontent.com"
           data-callback="handleGoogleLogin"></div>
        <div class="g_id_signin" data-type="standard"></div>
      </div>
    </div>
  </div> <!-- End of login-container -->

  <div id="dashboard" class="hidden">
    <!-- ... (Dashboard content remains the same) ... -->
  </div>

  <script>
    let currentUser = null;
    let darkMode = false;
    let chartType = 'line';

    // ... (Endpoints and charts remain the same) ...

    function handleGoogleLogin(response) {
      console.log("Google login triggered:", response);
      const data = jwt_decode(response.credential);
      initDashboard(data.email);
    }

    function initDashboard(user) {
      currentUser = user;
      document.getElementById("login-container").classList.add("hidden"); // Hide login container
      document.getElementById("dashboard").classList.remove("hidden");
      document.getElementById("userDisplay").textContent = user;
      updateCharts();
      setInterval(updateCharts, 10000);
      fetch("https://iwqd.onrender.com/api/auth", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ email: user }) // Send email in the body
      });
    }

    // ... (rest of the JavaScript code remains the same, except for the removal of the conflicting window.onload) ...

    window.onload = async () => {
      document.getElementById('login-container').style.display = 'block'; // Show login initially
    };
  </script>
</body>
</html>
